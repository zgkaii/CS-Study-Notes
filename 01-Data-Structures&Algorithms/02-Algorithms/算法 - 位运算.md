# 位运算基础

## 位运算符概览

| 符号 | 描述 | 运算规则                                                     |
| ---- | ---- | ------------------------------------------------------------ |
| `&`  | 与   | 两个位都为1时，结果才为1                                     |
| `|`  | 或   | 两个位都为0时，结果才为0                                     |
| `~`  | 非   | `~1 = 0 , ~0 = 1`                                            |
| `^`  | 异或 | 两个位相同为0，相异为1                                       |
| `<<` | 左移 | 各二进位全部左移若干位，高位丢弃，低位补0                    |
| `>>` | 右移 | 各二进位全部右移若干位，对无符号数，高位补0；<br/>有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移） |

## 基础应用

**与(&)**

* **清零**：任何一个数字，只要与一个各位都为零的数值相与，结果为零。
* **取一个数的指定位**：
* **判断奇偶**：最末位为0，偶数；最末位为1，奇数。`(a & 1) == 0` 代替`a % 2 == 0`来判断奇偶。

**或(|)**

* **来对一个数据的某些位设置为1**：

**非(~)**

>  编写中... 

**异或(^)**

* **翻转指定位**：
* **与0相异或值不变**：
* **交换两个数**：

**位移(<<与>>)**

\>\> n 为算术右移，相当于除以 2n，例如 -7 \>\> 2 = -2。

```
11111111111111111111111111111001  >> 2
--------
11111111111111111111111111111110
```

\>\>\> n 为无符号右移，左边会补上 0。例如 -7 \>\>\> 2 = 1073741822。

```
11111111111111111111111111111001  >>> 2
--------
00111111111111111111111111111111
```

<< n 为算术左移，相当于乘以 2n。-7 << 2 = -28。

```
11111111111111111111111111111001  << 2
--------
11111111111111111111111111100100
```

> 编写中...

## 综合使用

0s 表示一串 0，1s 表示一串 1。

```
x ^ 0s = x      x & 0s = 0      x | 0s = x
x ^ 1s = ~x     x & 1s = x      x | 1s = 1s
x ^ x = 0       x & x = x       x | x = x
```

利用 `x ^ 1s` = `\~x` 的特点，可以将一个数的位级表示翻转；利用 `x ^ x = 0` 的特点，可以将三个数中重复的两个数去除，只留下另一个数。

```
1^1^2 = 2
```

利用 x & 0s = 0 和 x & 1s = x 的特点，可以实现掩码操作。一个数 num 与 mask：00111100 进行位与操作，只保留 num 中与 mask 的 1 部分相对应的位。

```
01011011 &
00111100
--------
00011000
```

利用 x | 0s = x 和 x | 1s = 1s 的特点，可以实现设值操作。一个数 num 与 mask：00111100 进行位或操作，将 num 中与 mask 的 1 部分相对应的位都设置为 1。

```
01011011 |
00111100
--------
01111111
```

**mask 计算** 

要获取 111111111，将 0 取反即可，\~0。

要得到只有第 i 位为 1 的 mask，将 1 向左移动 i-1 位即可，1<<(i-1) 。例如 1<<4 得到只有第 5 位为 1 的 mask ：00010000。

要得到 1 到 i 位为 1 的 mask，(1<<i)-1 即可，例如将 (1<<4)-1 = 00010000-1 = 00001111。

要得到 1 到 i 位为 0 的 mask，只需将 1 到 i 位为 1 的 mask 取反，即 \~((1<<i)-1)。

**Java 中的位操作**  

```html
static int Integer.bitCount();           // 统计 1 的数量
static int Integer.highestOneBit();      // 获得最高位
static String toBinaryString(int i);     // 转换为二进制表示的字符串
```

`>>>` 无符号右移，`<<<`无符号左移。

# 实战演练

- https://leetcode-cn.com/problems/number-of-1-bits/
- https://leetcode-cn.com/problems/power-of-two/
- https://leetcode-cn.com/problems/reverse-bits/
- https://leetcode-cn.com/problems/n-queens/description/
- https://leetcode-cn.com/problems/n-queens-ii/description/
- https://leetcode-cn.com/problems/counting-bits/description/

## 只出现一次的数字 III

[260. 只出现一次的数字 III](https://leetcode-cn.com/problems/single-number-iii/)

## 比特位计数

[比特位计数](https://leetcode-cn.com/problems/counting-bits/)

## N皇后

[51. N 皇后](https://leetcode-cn.com/problems/n-queens/)

> 编写中... 

# 参考

* [https://www.runoob.com/w3cnote/bit-operation.html](https://www.runoob.com/w3cnote/bit-operation.html)
* [https://www.zhihu.com/question/38206659](https://www.zhihu.com/question/38206659)