- [OOA、OOD与OOP](#ooaood与oop)
- [封装、抽象、继承、多态](#封装抽象继承多态)
  - [封装（Encapsulation）](#封装encapsulation)
  - [抽象（Abstraction）](#抽象abstraction)
  - [继承（Inheritance）](#继承inheritance)
  - [多态（Polymorphism）](#多态polymorphism)
- [对比面向对象与面向过程](#对比面向对象与面向过程)
- [别用面向对象书写面向过程](#别用面向对象书写面向过程)
- [接口vs抽象类](#接口vs抽象类)
- [基于接口而非实现编程](#基于接口而非实现编程)
- [多用组合少用继承](#多用组合少用继承)

# OOA、OOD与OOP

**面向对象编程的英文缩写是 OOP**，全称是 Object Oriented Programming。对应地，面向对象编程语言的英文缩写是 OOPL，全称是 Object Oriented Programming Language。

面向对象编程是一种编程范式或编程风格。它以类（class）或对象（object）作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石 。 面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言。

只要某种编程语言支持类或对象的语法概念，并且以此作为组织代码的基本单元，那就可以被粗略地认为它就是面向对象编程语言了。至于是否有现成的语法机制，完全地支持了面向对象编程的四大特性、是否对四大特性有所取舍和优化，可以不作为判定的标准。可以这样认为，**按照严格的定义，很多语言都不能算得上面向对象编程语言，但按照不严格的定义来讲，现在流行的大部分编程语言都是面向对象编程语言**。

**面向对象分析英文缩写是 OOA**，全称是 Object Oriented Analysis；**面向对象设计的英文缩写是 OOD**，全称是 Object Oriented Design。OOA、OOD、OOP 三个连在一起就是面向对 象分析、设计、编程（实现），正好是面向对象软件开发要经历的三个阶段。

面向对象分析与设计中的“分析”和“设 计”这两个词，我们完全可以从字面上去理解，不需要过度解读，简单类比软件开发中的需求分析、系统设计即可。之所以在前面加“面向对象”这几个字，是因为我们是围绕着对象或类来做需求分析和设计的。

> [UML（Unified Model Language）](https://github.com/zgkaii/CS-Study-Notes/blob/master/02-Tools/IntelliJ%20IDEA%E4%B9%8BUML%E7%B1%BB%E5%9B%BE%E4%B8%8E%E6%97%B6%E5%BA%8F%E5%9B%BE.md)，统一建模语言常用来画图表达面向对象或设计模式的设计思路。

# 封装、抽象、继承、多态

## 封装（Encapsulation）

封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类 提供的方式来访问内部信息或者数据。它需要编程语言提供权限访问控制语法来支持，例如 Java 中的 private、protected、public 关键字。

封装特性存在的意义，一方面是保护数据 不被随意修改，提高代码的可维护性；另一方面是仅暴露有限的必要接口，提高类的易用 性。

## 抽象（Abstraction）

 封装主要讲的是如何隐藏信息、保护数据，而抽 象讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。在面向对象编程中，我们常借助编程语言提供的接口类（比如 Java 中的 interface 关键字语法）或者抽象类（比如 Java 中的 abstract 关键字语法）这两种语法机制，来实现抽象。

抽象存在的意义，一方面是提高代 码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另一方面，它也 是处理复杂系统的有效手段，能有效地过滤掉不必要关注的信息。

## 继承（Inheritance）

继承是用来表示类之间的`is-a` 关系，比如猫是一种哺乳动物。从继承关系上来讲，继承可以分为两种模式，单继承 和多继承。单继承表示一个子类只继承一个父类，多继承表示一个子类可以继承多个父类， 比如猫既是哺乳动物，又是爬行动物。

为了实现继承这个特性，编程语言需要提供特殊的语法机制来支持，比如 Java 使用 extends 关键字来实现继承，C++ 使用冒号`（class B : public A）`，Python 使用 `paraentheses()`，Ruby 使用 `<`。不过，有些编程语言只支持单继承，不支持多重继承，比 如`Java、PHP、C#、Ruby `等，而有些编程语言既支持单重继承，也支持多重继承，比如` C++、Python、Perl `等。

继承主要是用来解决代码复用的问题。

## 多态（Polymorphism）

多态是指子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。多态这种特 性也需要编程语言提供特殊的语法机制来实现，比如继承、接口类、duck-typing。不过，并不是每种编程语言都支持接口类或者 duck-typing 这两种语法机制，比如 C++ 就不支持接口类语法，而 duck-typing 只有一些动态语言才支持，比如 Python、 JavaScript 等。多态可 以提高代码的扩展性和复用性，是很多设计模式、设计原则、编程技巧的代码实现基础。

# 对比面向对象与面向过程

面向过程编程也是一种编程范式或编程风格。它以过程（可以为理解方法、函数、操 作）作为组织代码的基本单元，以数据（可以理解为成员变量、属性）与方法相分离为 最主要的特点。

面向过程风格是一种流程化的编程风格，通过拼接一组顺序执行的方法 来操作数据完成一项功能。 面向过程编程语言首先是一种编程语言。它最大的特点是不支持类和对象两个语法概 念，不支持丰富的面向对象编程特性（比如继承、多态、封装），仅支持面向过程编 程。

面向对象编程相比起面向过程编程的优势主要有三个。

* 对于大规模复杂程序的开发，程序的处理流程并非单一的一条主线，而是错综复杂的网 状结构。面向对象编程比起面向过程编程，更能应对这种复杂类型的程序开发。

* 面向对象编程相比面向过程编程，具有更加丰富的特性（封装、抽象、继承、多态）。 利用这些特性编写出来的代码，更加易扩展、易复用、易维护。

* 从编程语言跟机器打交道的方式的演进规律中，我们可以总结出：面向对象编程语言比 起面向过程编程语言，更加人性化、更加高级、更加智能。

# 别用面向对象书写面向过程

我们需要掌握的是下面三种违反面向对象编程风格的典型代码设计：

* **滥用 getter、setter 方法**
  * 在设计实现类的时候，除非真的需要，否则尽量不要给属性定义 setter 方法。除此之外， 尽管 getter 方法相对 setter 方法要安全些，但是如果返回的是集合容器，那也要防范集合 内部数据被修改的风险。
* **Constants 类、Utils 类的设计问题**
  * 对于这两种类的设计，我们尽量能做到职责单一，定义一些细化的小类，比如 RedisConstants、FileUtils，而不是定义一个大而全的 Constants 类、Utils 类。除此之 外，如果能将这些类中的属性和方法，划分归并到其他业务类中，那是最好不过的了，能极 大地提高类的内聚性和代码的可复用性。
* **基于贫血模型的开发模式**
  * 统的 MVC 结构分为 Model 层、Controller 层、View 层这三层。不过，在做前后端分离之后，三层结构在后端开发中，会稍微有些调整，被分为 Controller 层、Service 层、 Repository 层。Controller 层负责暴露接口给前端调用，Service 层负责核心业务逻辑， Repository 层负责数据读写。而在每一层中，我们又会定义相应的 VO（View Object）、 BO（Business Object）、Entity。一般情况下，VO、BO、Entity 中只会定义数据，不会定义方法，这是因为数据和操作是分开定义在 VO/BO/Entity 和 Controler/Service/Repository 中的，这就是典型的面向过程的编程风格。

# 接口vs抽象类

 **抽象类和接口的语法特性**

抽象类（abstract）不允许被实例化，只能被继承。它可以包含属性和方法。方法既可以包含代码实现， 也可以不包含代码实现。不包含代码实现的方法叫作抽象方法。子类继承抽象类，必须实现 抽象类中的所有抽象方法。接口（interface）不能包含属性，只能声明方法，方法不能包含代码实现。类 实现接口的时候，必须实现接口中声明的所有方法。

**抽象类和接口存在的意义**

抽象类是对成员变量和方法的抽象，是一种 is-a 关系，是为了解决代码复用问题。接口仅 仅是对方法的抽象，是一种 has-a 关系，表示具有某一组行为特性，是为了解决解耦问 题，隔离接口和具体的实现，提高代码的扩展性。

**抽象类和接口的应用场景区别**

什么时候该用抽象类？什么时候该用接口？实际上，判断的标准很简单。如果要表示一种 `is-a` 的关系，并且是为了解决代码复用问题，我们就用抽象类；如果要表示一种 `has-a `关系，并且是为了解决抽象而非代码复用问题，那我们就用接口。

# 基于接口而非实现编程

“基于接口而非实现编程”这条原则的英文描述是：“Program to an interface, not an implementation”。我们理解这条原则的时候，千万不要一开始就与具体的编程语言挂 钩，局限在编程语言的“接口”语法中（比如 Java 中的 interface 接口语法）。这条原则 最早出现于 1994 年 GoF 的《设计模式》这本书，它先于很多编程语言而诞生（比如 Java 语言），是一条比较抽象、泛化的设计思想。

实际上，“基于接口而非实现编程”这条原则的另一个表述方式，是“基于抽象而非实现编 程”。后者的表述方式其实更能体现这条原则的设计初衷。在软件开发中，最大的挑战之一 就是需求的不断变化，这也是考验代码设计好坏的一个标准。**越抽象、越顶层、越脱离具体某一实现的设计，越能提高代码的灵活性，越能应对未来的需求变化。好的代码设计，不仅能应对当下的需求，而且在将来需求发生变化的时候，仍然能够在不破坏原有代码设计的情况下灵活应对**。而抽象就是提高代码扩展性、灵活性、可维护性最有效的手段之一。

我们在定义接口的时候，一方面，命名要足够通用，不能包含跟具体实现相关的字眼； 另一方面，与特定实现有关的方法不要定义在接口中。

“基于接口而非实现编程”这条原则，不仅仅可以指导非常细节的编程开发，还能指导更加上层的架构设计、系统设计等。比如，服务端与客户端之间的“接口”设计、类库的“接口”设计。

# 多用组合少用继承

**为什么不推荐使用继承？**

继承是面向对象的四大特性之一，用来表示类之间的 is-a 关系，可以解决代码复用的问 题。虽然继承有诸多作用，但继承层次过深、过复杂，也会影响到代码的可维护性。在这种 情况下，我们应该尽量少用，甚至不用继承。

**组合相比继承有哪些优势？** 

继承主要有三个作用：表示 is-a 关系，支持多态特性，代码复用。而这三个作用都可以通过组合、接口、委托三个技术手段来达成。除此之外，利用组合还能解决层次过深、过复杂的继承关系影响代码可维护性的问题。

**如何判断该用组合还是继承？**

尽管我们鼓励多用组合少用继承，但组合也并不是完美的，继承也并非一无是处。在实际的项目开发中，我们还是要根据具体的情况，来选择该用继承还是组合。如果类之间的继承结 构稳定，层次比较浅，关系不复杂，我们就可以大胆地使用继承。反之，我们就尽量使用组 合来替代继承。除此之外，还有一些设计模式、特殊的应用场景，会固定使用继承或者组合。

