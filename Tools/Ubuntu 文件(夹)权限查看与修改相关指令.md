# Ubuntu 文件(夹)权限查看与修改相关指令

> 文章来源：https://www.jianshu.com/nb/19561165

查看文件(filename)权限命令：

```shell
ls -l filename
```

查看文件夹(folder)权限命令：

```shell
ls -ld folder
```

比如：

```shell
ldh@ldh-Z370P-D3:~/work_space/PythonFuzzyMatching$ ls -l FuzzyMatching.sh
-rwxrwxr-x 1 ldh ldh 609 5月  23 16:41 FuzzyMatching.sh
```

分别对应的是：
文件属性 连接数 文件拥有者 所属群组 文件大小 文件修改时间 文件名

#### - rwx rwx r-x

- 第一个字符 **"-"** 指定了文件类型，在通常意义上，一个目录也是一个文件，如果第一个字符是横线，表示是一个非目录的文件，如果是d，表示是一个目录。
- 第二段 **rwx** 是文件拥有者的属性。
- 第三段 **rwx** 是文件所属群组的属性
- 第四段 **r-x** 是对于其它用户的属性
  如上面文件"FuzzyMatching.sh"的访问权限，表示文件"FuzzyMatching.sh"是一个非目录文件；文件"FuzzyMatching.sh"的属主"ldh"有读写可执行权限；与文件“FuzzyMatching.sh”属主"ldh"同组的用户也有读写可执行权限；其他用户有读和可执行权限。

确定了一个文件的访问权限后，用户可以利用Linux系统提供的chmod命令来重新设定不同的访问权限。也可以利用chown命令来更改某个文件或目录的所有者。利用chgrp命令来更改某个文件或目录的用户组。

## chmod 命令

**功能**：chmod命令是非常重要的，用于改变文件或目录的访问权限，用户用它控制文件或目录的访问权限。
**语法**：该命令有两种用法：一种是包含字母和操作符表达式的文字设定法，另一种是包含数字的数字设定法。

#### 1. 文字设定法

```shell
chmod [who] [+ | - | =] [mode] filename(folder)
```

**参数**：
操作对象who可是下述字母中的任一个或者它们的组合：

- u 表示“用户（user）”，即文件或目录的所有者。
- g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。
- o 表示“其他（others）用户，不是u和g”。
- a 表示“所有（all）用户，也就是包括u，g，o”。它是系统默认值。

操作符号可以是：

- \+ 添加某个权限。
- \- 取消某个权限。
- = 赋予给定权限并取消其他所有权限（如果有的话），表示使之成为唯一的权限。

设置mode所表示的权限可用下述字母的任意组合：

- r 可读。
- w 可写。
- x 可执行。
- X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。
- s 在文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用 户ID位，“g＋s”设置组ID位。
- t 保存程序的文本到交换设备上。
- u 与文件属主拥有一样的权限。
- g 与和文件属主同组的用户拥有一样的权限。
- o 与其他用户拥有一样的权限。

文件名：以空格分开的要改变权限的文件列表，支持通配符。
在一个命令行中可给出多个权限方式，其间用逗号隔开。例如：

```bash
chmod g+r，o+r example
# 使同组和其他用户对文件example 有读权限
```

#### 2. 数字设定法

rwx也可以用数字来代替：

- r ------------4
- w -----------2
- x ------------1
- \- ------------0

-rw------- (600) 只有所有者才有读和写的权限
-rw-r--r-- (644) 只有所有者才有读和写的权限，组群和其他人只有读的权限
-rwx------ (700) 只有所有者才有读，写，执行的权限
-rwxr-xr-x (755) 只有所有者才有读，写，执行的权限，组群和其他人只有读和执行的权限
-rwx--x--x (711) 只有所有者才有读，写，执行的权限，组群和其他人只有执行的权限
-rw-rw-rw- (666) 每个人都有读写的权限
-rwxrwxrwx (777) 每个人都有读写和执行的权限

```bash
sudo chmod 600 filename  # 只有所有者有读和写的权限
sudo chmod 644 filename  # 所有者有读和写的权限，组用户只有读的权限 
sudo chmod 700 filename  # 只有所有者有读和写以及执行的权限 
sudo chmod 666 filename  # 每个人都有读和写的权限 
sudo chmod 777 filename   # 每个人都有读和写以及执行的权限 
```

若分配给某个文件所有权限，则利用下面的命令：

```bash
sudo chmod -R 777 文件或文件夹的名字  # 表示对当前目录及目录下所有的文件赋予可读可写可执行权限
```

**注：**
chmod [-cfvR]

- c 当发生改变时，报告处理信息
- f 错误信息不输出
- R 处理指定目录以及其子目录下的所有文件
- v 运行时显示详细处理信息

## chgrp命令

**功能**：改变文件或目录所属的组。
**语法**：chgrp [选项] group filename

- 该命令改变指定指定文件所属的用户组。其中group可以是用户组ID，也可以是/etc/group文件中用户组的组名。文件名是以空格分开的要改变属组的文件列表，支持通配符。如果用户不是该文件的属主或超级用户，则不能改变该文件的组。

**参数**：

- R 递归式地改变指定目录及其下的所有子目录和文件的属组。
  例1：$ chgrp - R book /opt/local /book
  改变/opt/local /book/及其子目录下的所有文件的属组为book。

## chown 命令

**功能**：更改某个文件或目录的属主和属组。这个命令也很常用。例如root用户把自己的一个文件拷贝给用户xu，为了让用户xu能够存取这个文件，root用户应该把这个文件的属主设为xu，否则，用户xu无法存取这个文件。
**语法**：chown [选项] 用户或组文件
**说明**：chown将指定文件的拥有者改为指定的用户或组。用户可以是用户名或用户ID。组可以是组名或组ID。文件是以空格分开的要改变权限的文件列表，支持通配符。
**参数**：

- \- R 递归式地改变指定目录及其下的所有子目录和文件的拥有者。
- \- v 显示chown命令所做的工作。

例1：把文件test.txt的所有者改为wang。

```shell
chown wang test.txt
```

例2：把目录/my_work及其下的所有文件和子目录的属主改成ldh，属组改成users。

```shell
chown - R ldh.users /my_work
```



